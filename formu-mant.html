<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Reserva de Mantenimiento - Castilla Motors</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
</head>
<body class="formulario">

    <section class="intro" style="padding-top: 100px; padding-bottom: 50px;">
        <div class="container text-center">
            <h1 class="section-heading" style="color: white;">Reserva tu mantenimiento</h1>
            <p class="text-light">Completa tus datos para confirmar la reserva.</p>
        </div>
    </section>

    <section class="content">
        <div class="container">
            <h2 class="text-center">Mantenimientos seleccionados</h2>
            <table class="table table-bordered" id="tablaServicios">
                <thead>
                    <tr><th>Nombre</th><th>Precio (€)</th><th>Comentario</th></tr>
                </thead>
                <tbody></tbody>
            </table>

            <h3 class="text-center" id="totalFinal">Total: €0</h3>

            <form id="reservaForm" style="margin-top:40px;">
                <div class="row">
                    <div class="col-sm-6">
                        <label>Nombre *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-sm-6">
                        <label>Apellidos *</label>
                        <input type="text" class="form-control" required>
                    </div>
                </div>
                <br>
                <label>Dirección *</label>
                <input type="text" class="form-control" required><br>

                <label>Teléfono (opcional)</label>
                <input type="text" class="form-control"><br>

                <label>Método de pago *</label>
                <select class="form-control" required>
                    <option value="">Seleccione...</option>
                    <option value="tarjeta">Tarjeta de crédito</option>
                    <option value="paypal">PayPal</option>
                    <option value="metalico">Metálico</option>
                </select><br>

                <div class="text-center">
                    <button type="submit" class="btn btn-primary btn-lg">Confirmar Reserva</button>
                </div>
            </form>
        </div>
    </section>

    <script>
        const tabla = document.querySelector('#tablaServicios tbody');
        const totalFinal = document.getElementById('totalFinal');
        const servicios = JSON.parse(localStorage.getItem('mantenimientos')) || [];
        let total = 0;

        servicios.forEach(s => {
            const fila = document.createElement('tr');
            fila.innerHTML = `
                <td>${s.nombre}</td>
                <td>${s.precio}</td>
                <td><input type="text" class="form-control" placeholder="Comentario obligatorio" required></td>
            `;
            tabla.appendChild(fila);
            total += parseFloat(s.precio);
        });

        totalFinal.textContent = 'Total: €' + total;

        document.getElementById('reservaForm').addEventListener('submit', e => {
            e.preventDefault();
            alert('Reserva confirmada. ¡Gracias por confiar en Castilla Motors!');
            localStorage.clear();
            window.location.href = 'index.html';
        });
    </script>

</body>
</html>
